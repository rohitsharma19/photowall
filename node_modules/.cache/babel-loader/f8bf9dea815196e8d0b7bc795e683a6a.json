{"ast":null,"code":"import { database } from '../database/config';\nexport function startAddingPost(post) {\n  return dispatch => {\n    return database.ref('posts').update({\n      [post.id]: post\n    }).then(() => {\n      dispatch(addPost(post));\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n}\nexport function startLoadingPosts() {\n  return dispatch => {\n    return database.ref('posts').once('value').then(snapshot => {\n      let posts = [];\n      snapshot.forEach(childSnapshot => {\n        posts.push(childSnapshot.val());\n      });\n      dispatch(loadPost(posts));\n    });\n  };\n}\nexport function startRemovingPost(index, id) {\n  return dispatch => {\n    return database.ref(`posts/${id}`).remove().then(() => {\n      dispatch(removePost(index));\n    });\n  };\n}\nexport function removePost(index) {\n  return {\n    type: 'REMOVE_POST',\n    index\n  };\n}\nexport function addPost(post) {\n  return {\n    type: 'ADD_POST',\n    post\n  };\n}\nexport function addComment(comment, postId) {\n  return {\n    type: 'ADD_COMMENT',\n    comment,\n    postId\n  };\n}\nexport function loadPost(posts) {\n  return {\n    type: 'LOAD_POSTS',\n    posts\n  };\n}","map":{"version":3,"sources":["/home/luvly/Workspaces/ReactJSCourse/photowall_v2/src/redux/actions.js"],"names":["database","startAddingPost","post","dispatch","ref","update","id","then","addPost","catch","error","console","log","startLoadingPosts","once","snapshot","posts","forEach","childSnapshot","push","val","loadPost","startRemovingPost","index","remove","removePost","type","addComment","comment","postId"],"mappings":"AAAA,SAAQA,QAAR,QAAuB,oBAAvB;AAEA,OAAO,SAASC,eAAT,CAAyBC,IAAzB,EAA8B;AACjC,SAAQC,QAAD,IAAc;AACjB,WAAOH,QAAQ,CAACI,GAAT,CAAa,OAAb,EAAsBC,MAAtB,CAA6B;AAAC,OAACH,IAAI,CAACI,EAAN,GAAUJ;AAAX,KAA7B,EAA+CK,IAA/C,CAAoD,MAAI;AAC3DJ,MAAAA,QAAQ,CAACK,OAAO,CAACN,IAAD,CAAR,CAAR;AACH,KAFM,EAEJO,KAFI,CAEGC,KAAD,IAAW;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,KAJM,CAAP;AAKH,GAND;AAOH;AAED,OAAO,SAASG,iBAAT,GAA4B;AAC/B,SAAOV,QAAD,IAAc;AAChB,WAAOH,QAAQ,CAACI,GAAT,CAAa,OAAb,EAAsBU,IAAtB,CAA2B,OAA3B,EAAoCP,IAApC,CAA0CQ,QAAD,IAAY;AACxD,UAAIC,KAAK,GAAG,EAAZ;AACAD,MAAAA,QAAQ,CAACE,OAAT,CAAkBC,aAAD,IAAmB;AAChCF,QAAAA,KAAK,CAACG,IAAN,CAAWD,aAAa,CAACE,GAAd,EAAX;AACH,OAFD;AAGAjB,MAAAA,QAAQ,CAACkB,QAAQ,CAACL,KAAD,CAAT,CAAR;AACH,KANM,CAAP;AAOH,GARD;AASH;AAED,OAAO,SAASM,iBAAT,CAA2BC,KAA3B,EAAkCjB,EAAlC,EAAqC;AACxC,SAAOH,QAAD,IAAc;AAChB,WAAOH,QAAQ,CAACI,GAAT,CAAc,SAAQE,EAAG,EAAzB,EAA4BkB,MAA5B,GAAqCjB,IAArC,CAA0C,MAAI;AACjDJ,MAAAA,QAAQ,CAACsB,UAAU,CAACF,KAAD,CAAX,CAAR;AACH,KAFM,CAAP;AAGH,GAJD;AAKH;AAED,OAAO,SAASE,UAAT,CAAoBF,KAApB,EAA0B;AAC7B,SAAO;AACHG,IAAAA,IAAI,EAAE,aADH;AAEHH,IAAAA;AAFG,GAAP;AAIH;AAED,OAAO,SAASf,OAAT,CAAiBN,IAAjB,EAAsB;AACzB,SAAO;AACHwB,IAAAA,IAAI,EAAE,UADH;AAEHxB,IAAAA;AAFG,GAAP;AAIH;AAED,OAAO,SAASyB,UAAT,CAAoBC,OAApB,EAA6BC,MAA7B,EAAoC;AACvC,SAAO;AACHH,IAAAA,IAAI,EAAE,aADH;AAEHE,IAAAA,OAFG;AAGHC,IAAAA;AAHG,GAAP;AAKH;AAED,OAAO,SAASR,QAAT,CAAkBL,KAAlB,EAAwB;AAC3B,SAAO;AACHU,IAAAA,IAAI,EAAG,YADJ;AAEHV,IAAAA;AAFG,GAAP;AAIH","sourcesContent":["import {database} from '../database/config';\n\nexport function startAddingPost(post){\n    return (dispatch) => {\n        return database.ref('posts').update({[post.id]:post}).then(()=>{\n            dispatch(addPost(post))\n        }).catch((error) => {\n            console.log(error);\n        })\n    }\n}\n\nexport function startLoadingPosts(){\n    return(dispatch) => {\n        return database.ref('posts').once('value').then((snapshot)=>{\n            let posts = [];\n            snapshot.forEach((childSnapshot) => {\n                posts.push(childSnapshot.val());\n            });\n            dispatch(loadPost(posts))\n        })\n    }\n}\n\nexport function startRemovingPost(index, id){\n    return(dispatch) => {\n        return database.ref(`posts/${id}`).remove().then(()=>{\n            dispatch(removePost(index))\n        })\n    }\n}\n\nexport function removePost(index){\n    return {\n        type: 'REMOVE_POST',\n        index\n    }\n}\n\nexport function addPost(post){\n    return {\n        type: 'ADD_POST',\n        post\n    }\n}\n\nexport function addComment(comment, postId){\n    return {\n        type: 'ADD_COMMENT',\n        comment,\n        postId\n    }\n}\n\nexport function loadPost(posts){\n    return {\n        type : 'LOAD_POSTS',\n        posts\n    }\n}"]},"metadata":{},"sourceType":"module"}