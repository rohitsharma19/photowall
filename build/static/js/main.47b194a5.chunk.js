(this.webpackJsonpphotowall=this.webpackJsonpphotowall||[]).push([[0],{101:function(t,e,n){},171:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"startAddingPost",(function(){return I})),n.d(a,"startLoadingPosts",(function(){return L})),n.d(a,"startRemovingPost",(function(){return x})),n.d(a,"startAddingComment",(function(){return T})),n.d(a,"startLoadingComments",(function(){return M})),n.d(a,"removePost",(function(){return R})),n.d(a,"addPost",(function(){return G})),n.d(a,"addComment",(function(){return V})),n.d(a,"loadPost",(function(){return X})),n.d(a,"loadComments",(function(){return F}));var o=n(1),r=n.n(o),c=n(89),i=n.n(c),s=(n(101),n(7)),u=n(18),l=n(21),p=n(29),m=n(30),d=[];var h=Object(u.c)({posts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE_POST":return[].concat(Object(m.a)(t.slice(0,e.index)),Object(m.a)(t.slice(e.index+1)));case"ADD_POST":return[].concat(Object(m.a)(t),[e.post]);case"LOAD_POSTS":return e.posts;default:return t}},comments:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_COMMENT":return t[e.postId]?Object(p.a)(Object(p.a)({},t),{},Object(l.a)({},e.postId,[].concat(Object(m.a)(t[e.postId]),[e.comment]))):Object(p.a)(Object(p.a)({},t),{},Object(l.a)({},e.postId,[e.comment]));case"LOAD_COMMENTS":return e.comments;default:return t}}}),f=n(43),b=n(13),O=n(14),v=n(16),E=n(15),j=function(t){Object(v.a)(n,t);var e=Object(E.a)(n);function n(){return Object(b.a)(this,n),e.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var t=this;return r.a.createElement("figure",{className:"figure"},r.a.createElement(s.b,{to:"/single/".concat(this.props.post.id)},r.a.createElement("img",{className:"photo",src:this.props.post.imageLink,alt:this.props.post.description})),r.a.createElement("figcaption",null,r.a.createElement("p",null,this.props.post.description)),r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{onClick:function(){t.props.startRemovingPost(t.props.index,t.props.post.id),t.props.history.push("/")}},"Remove"),r.a.createElement(s.b,{className:"button",to:"/single/".concat(this.props.post.id)},r.a.createElement("div",{className:"comment-count"},r.a.createElement("div",{className:"speech-bubble"}),this.props.comments[this.props.post.id]?this.props.comments[this.props.post.id].length:0))))}}]),n}(o.Component),g=function(t){Object(v.a)(n,t);var e=Object(E.a)(n);function n(){return Object(b.a)(this,n),e.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement(s.b,{className:"addIcon",to:"/AddPhoto"}),r.a.createElement("div",{className:"photoGrid"},this.props.posts.sort((function(t,e){return e.id-t.id})).map((function(e,n){return r.a.createElement(j,Object.assign({post:e,key:n},t.props,{index:n}))}))))}}]),n}(o.Component),y=n(25),S=function(t){Object(v.a)(n,t);var e=Object(E.a)(n);function n(){var t;return Object(b.a)(this,n),(t=e.call(this)).handleSubmit=t.handleSubmit.bind(Object(y.a)(t)),t}return Object(O.a)(n,[{key:"handleSubmit",value:function(t){t.preventDefault();var e={id:Number(new Date),description:t.target.elements.description.value,imageLink:t.target.elements.link.value};this.props.startAddingPost(e),this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"form"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",placeholder:"link",name:"link"}),r.a.createElement("input",{type:"text",placeholder:"Description",name:"description"}),r.a.createElement("button",null,"Post"))))}}]),n}(o.Component),N=Object(s.d)(S),D=function(t){Object(v.a)(n,t);var e=Object(E.a)(n);function n(){var t;return Object(b.a)(this,n),(t=e.call(this)).handleSubmit=t.handleSubmit.bind(Object(y.a)(t)),t}return Object(O.a)(n,[{key:"handleSubmit",value:function(t){t.preventDefault();var e=t.target.elements.comment.value;this.props.startAddingComment(e,this.props.id),t.target.elements.comment.value=""}},{key:"render",value:function(){return console.log(this.props.comments),r.a.createElement("div",{className:"comment"},r.a.createElement("form",{className:"comment-form",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",placeholder:"Comment",name:"comment"}),r.a.createElement("input",{type:"submit",hidden:!0})),this.props.comments.map((function(t,e){return r.a.createElement("p",{key:e},t)})))}}]),n}(o.Component),P=Object(s.d)(D),_=function(t){Object(v.a)(n,t);var e=Object(E.a)(n);function n(){return Object(b.a)(this,n),e.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var t=this.props,e=t.match,n=t.posts,a=Number(e.params.id),o=n.find((function(t){return t.id===a})),c=this.props.comments[a]||[],i=this.props.posts.findIndex((function(t){return t.id===a}));return!0===this.props.loading?r.a.createElement("div",{className:"loader"},"...Loading "):o?r.a.createElement("div",{id:"Single",className:"single-photo"},r.a.createElement(j,Object.assign({post:o},this.props,{index:i})),r.a.createElement(P,Object.assign({},this.props,{comments:c,id:a}))):r.a.createElement("h1",null,"No Post Found...")}}]),n}(o.Component),k=Object(s.d)(_),A=function(t){Object(v.a)(n,t);var e=Object(E.a)(n);function n(){var t;Object(b.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={loading:!0},t}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.props.startLoadingPosts().then((function(){t.setState({loading:!1})})),this.props.startLoadingComments()}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement("h1",null,r.a.createElement(s.b,{to:"/"}," Photowall ")),r.a.createElement(s.c,{exact:!0,path:"/",render:function(){return r.a.createElement("div",null,r.a.createElement(g,t.props))}}),r.a.createElement(s.c,{exact:!0,path:"/AddPhoto",render:function(e){return r.a.createElement(N,t.props)}}),r.a.createElement(s.c,{path:"/single/:id",render:function(e){return r.a.createElement(k,Object.assign({loading:t.state.loading},t.props,e))}}))}}]),n}(o.Component),C=n(54);C.initializeApp({apiKey:"AIzaSyA8f0OK7lSZGtEAGppq647dOQPR5CYFxHI",authDomain:"photowall-ef219.firebaseapp.com",databaseURL:"https://photowall-ef219.firebaseio.com",projectId:"photowall-ef219",storageBucket:"photowall-ef219.appspot.com",messagingSenderId:"473591503379",appId:"1:473591503379:web:0c9312d765de5aea90bde6",measurementId:"G-GL4P736M3F"});var w=C.database();function I(t){return function(e){return w.ref("posts").update(Object(l.a)({},t.id,t)).then((function(){e(G(t))})).catch((function(t){console.log(t)}))}}function L(){return function(t){return w.ref("posts").once("value").then((function(e){var n=[];e.forEach((function(t){n.push(t.val())})),t(X(n))})).catch((function(t){console.log(t)}))}}function x(t,e){return function(n){return w.ref("posts/".concat(e)).remove().then((function(){n(R(t))})).catch((function(t){console.log(t)}))}}function T(t,e){return function(n){return w.ref("comments/"+e).push(t).then((function(){n(V(t,e))})).catch((function(t){console.log(t)}))}}function M(){return function(t){return w.ref("comments").once("value").then((function(e){var n=[];e.forEach((function(t){n[t.key]=Object.values(t.val())})),t(F(n))})).catch((function(t){console.log(t)}))}}function R(t){return{type:"REMOVE_POST",index:t}}function G(t){return{type:"ADD_POST",post:t}}function V(t,e){return{type:"ADD_COMMENT",comment:t,postId:e}}function X(t){return{type:"LOAD_POSTS",posts:t}}function F(t){return{type:"LOAD_COMMENTS",comments:t}}var U=n(92);var z=Object(U.a)(Object(f.b)((function(t){return{posts:t.posts,comments:t.comments}}),(function(t){return Object(u.b)(a,t)}))(A)),B=n(95),J=Object(u.d)(h,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Object(u.a)(B.a));i.a.render(r.a.createElement(f.a,{store:J},r.a.createElement(s.a,null,r.a.createElement(z,null))),document.getElementById("root"))},96:function(t,e,n){t.exports=n(171)}},[[96,1,2]]]);
//# sourceMappingURL=main.47b194a5.chunk.js.map